{serialize} = import './serialize'


print = fn ast:
  match ast:
    [{}, {tokenizer:{}}]:
      [expr, {errors}] = ast
      match errors:
        {length: ? > 0}:
          errors_text = pipe errors:
            map {error}:
              error
            fold err, str='':
              `${str}${err}\n`

          `
            ${serialize expr}

            error:
            ${errors_text}
          `
        else:
          serialize expr

    else:
      serialize:: ast


test = fn val:
  match val:
    [{}, {tokenizer: {}}]: true
    {type: {}, loc: {}}: true
    else: false

jest_serializer = {print, test}


