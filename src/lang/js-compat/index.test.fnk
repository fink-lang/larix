{describe, it, expect, to_match_snapshot} = import '@fink/jest'

{parse_expr, parse} = import '../..'


describe 'js-compat operators', fn:

  it 'parses new', fn:
    expect
      parse_expr 'new_foo = new Foobar(spam, ni)'
      to_match_snapshot

    expect
      parse_expr 'new_foo = new Foobar spam, ni'
      to_match_snapshot


  it 'parses throw', fn:
    expect
      parse_expr `throw_foo = foo or throw err('foobar')`
      to_match_snapshot

    expect
      parse_expr `throw_foo = foo or throw err 'foobar'`
      to_match_snapshot


describe 'try ...:', fn:

  it 'parses', fn:
    expect
      parse `
        [err, result] = try:
          throw new Error 'foobar'
      `
      to_match_snapshot



describe 'constants', fn:

  it 'parses null', fn:
    expect
      parse `
        foo = null
        bar = nullish
      `
      to_match_snapshot
