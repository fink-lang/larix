{next_is, collect_text, expression} = import '@fink/prattler'

{prefix} = import '../symbols'


doc_comment = fn op:
  {
    ...prefix:: op

    nud: fn: fn ctx:
      [text, expr_ctx] = collect_text:: ctx, op
      comment = {op, ...text}
      [{comments, ...expr}, next_ctx] = expression:: expr_ctx, 0
      [{...expr, comments: {...comments, leading: [comment]}}, next_ctx]
  }
