{curr_loc} = import '@fink/prattler'

{symbol} = import '../symbols'
{terminated_block} = import '../block'


call = fn op, end_symbol:
  led = fn: fn ctx, callee:
    {start} = callee.loc

    [{exprs: args, comments, loc}, next_ctx] = terminated_block:: ctx, end_symbol

    [{type: 'call', callee, args,  comments, loc: {...loc, start}}, next_ctx]

  {...symbol(op), led}
