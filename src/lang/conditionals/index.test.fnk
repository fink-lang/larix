{describe, it, eq, snapshot} = import '../../testing/jest'

{parse_expr} = import '../../'


describe:: 'match ...:', fn:

  it:: 'parses single line: match foo: bar', fn:
    parse_expr(`
      match item:
        test_pattern: result

        # fallback if no match
        else: spam
    `) eq snapshot


  it:: 'parses complex: {foo}: bar', fn:
    parse_expr(`
      match item:
        # nested object pattern
        {foo, spam: {ni}}: bar

        # nested iterables
        [foo, [1, 2]]: bar

        # mixed nested:
        [foo, {bar: 123, spam: [456, 789]}]: ni

        else:
          # fallback for no match
          spam
    `) eq snapshot


