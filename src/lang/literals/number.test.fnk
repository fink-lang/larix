{describe, it, expect, to_match_snapshot, to_throw} = import '../../testing/jest'

{parse_expr, parse} = import '../../'


describe:: 'numbers', fn:
  it:: 'parses int 12345', fn:
    expect::
      parse_expr:: ` 12345  `
      to_match_snapshot


  it:: 'parses hex, oct, bin', fn:
    expect::
      parse:: `
        0x123456789abcdef0
        0x123456789abcde
        0o12345670
        0b101010
      `
      to_match_snapshot


  it:: 'parses float 123.456', fn:
    expect::
      parse_expr:: `  123.456  `
      to_match_snapshot


  it:: 'parses float 123.456e10', fn:
    expect::
      parse:: `
        123.456e78
        123.456e+78
        123.456e-78
      `
      to_match_snapshot


  it:: 'throws when missing exponent', fn:
    expect::
      fn: parse_expr:: `123.456e * 78`, 'test.fnk'

      to_throw:: `
        test.fnk:1:9
        1| 123.456e * 78
                    ^

        Expected exponent.
      `
