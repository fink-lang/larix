{init_parser, start_parser} = import '@fink/prattler'

{init_language} = import './lang'
{parse_module} = import './lang/module'
{single_expression} = import './lang/block/expr'


init = fn ctx:
  pipe ctx:
    init_parser
    init_language
    start_parser


parse_expr = fn code, filename:
  ctx = init:: {code, filename}
  [expr] = single_expression:: ctx, 0
  expr


parse = fn code, filename:
  ctx = init:: {code, filename}
  [ast] = parse_module:: ctx
  ast

